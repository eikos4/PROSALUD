{% extends 'base.html' %}
{% block title %}Responder solicitud{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto py-10">
  <div class="bg-white rounded-2xl shadow-lg p-8 mb-8 border border-[#276EF1]/20">
    <h2 class="text-2xl font-black text-[#276EF1] mb-5 flex items-center gap-2">
      <i class="fas fa-inbox"></i>
      Solicitud de <span class="text-[#FF8800]">{{ req.client.username }}</span>
    </h2>
    <div class="mb-3">
      <span class="font-semibold text-[#164399]">Servicio:</span>
      <span class="text-gray-900">{{ req.service.title }}</span>
    </div>
    <div class="mb-3">
      <span class="font-semibold text-[#164399]">Mensaje del cliente:</span>
      <div class="bg-[#f5f7fc] text-gray-900 rounded-lg px-4 py-3 mt-1 mb-1 border border-[#276EF1]/20 shadow-sm">
        {{ req.message }}
      </div>
    </div>
    <div class="mb-4">
      <span class="font-semibold text-[#164399]">Estado actual:</span>
      {% if req.status == 'pending' %}
        <span class="inline-block px-2 py-1 bg-yellow-100 text-yellow-900 rounded text-xs font-bold shadow border border-yellow-300">Pendiente</span>
      {% elif req.status == 'accepted' %}
        <span class="inline-block px-2 py-1 bg-green-100 text-green-900 rounded text-xs font-bold shadow border border-green-300">Aceptada</span>
      {% elif req.status == 'rejected' %}
        <span class="inline-block px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-bold shadow border border-red-300">Rechazada</span>
      {% elif req.status == 'completed' %}
        <span class="inline-block px-2 py-1 bg-blue-100 text-blue-900 rounded text-xs font-bold shadow border border-blue-300">Completada</span>
      {% endif %}
    </div>
    <form method="POST" class="space-y-6">
      {{ form.hidden_tag() }}
      <div>
        {{ form.status.label(class_="block text-[#276EF1] font-bold mb-1") }}
        <select name="{{ form.status.name }}"
          class="form-select w-full px-4 py-2 rounded-lg border-2 border-[#276EF1] text-[#164399] bg-[#f7fafd] font-bold focus:ring-2 focus:ring-[#276EF1] shadow-sm"
          style="color: #164399; background-color: #f7fafd; font-weight: bold;" required>
          {% for value, label in form.status.choices %}
            <option value="{{ value }}" {% if form.status.data == value %}selected{% endif %} style="color:#164399;background:#fff;">
              {{ label }}
            </option>
          {% endfor %}
        </select>
        {% if form.status.errors %}
          <div class="text-red-500 text-xs mt-1">{{ form.status.errors[0] }}</div>
        {% endif %}
      </div>
      <div class="flex flex-col sm:flex-row gap-3 mt-7">
        {{ form.submit(class_="w-full sm:w-auto px-6 py-2 bg-[#276EF1] hover:bg-[#1E5BB8] text-white rounded-lg font-bold shadow transition", style="color:#fff;") }}
        <a href="{{ url_for('professional.requests_list') }}"
           class="w-full sm:w-auto px-6 py-2 bg-gray-100 hover:bg-gray-300 text-[#276EF1] rounded-lg font-bold shadow transition text-center border border-[#276EF1]/20">Volver</a>
      </div>
    </form>
  </div>
</div>
<style>
  /* For select dropdown items in all browsers */
  select, option { color: #164399 !important; background: #fff !important; }
  .bg-white, .bg-[#f5f7fc] { color: #164399 !important; }
  /* Improves input contrast on focus */
  input, textarea { color: #164399 !important; }
</style>
{% endblock %}
