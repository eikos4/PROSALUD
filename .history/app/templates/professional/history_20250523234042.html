{% extends 'base.html' %}
{% block title %}Historial de servicios{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto py-10">
  <h2 class="text-2xl font-bold text-[#276EF1] mb-6 flex items-center gap-2">
    <i class="fas fa-history"></i> Historial de servicios prestados
  </h2>
  {% if servicios %}
    <div class="overflow-x-auto rounded-xl shadow">
      <table class="min-w-full divide-y divide-gray-200 bg-white">
        <thead class="bg-[#f5f7fc]">
          <tr>
            <th class="px-4 py-2 text-left text-[#164399] font-semibold">Cliente</th>
            <th class="px-4 py-2 text-left text-[#164399] font-semibold">Servicio</th>
            <th class="px-4 py-2 text-left text-[#164399] font-semibold">Fecha</th>
            <th class="px-4 py-2 text-left text-[#164399] font-semibold">Evaluación</th>
          </tr>
        </thead>
        <tbody>
          {% for item in servicios %}
          <tr class="hover:bg-[#f8fbff] transition">
            <td class="px-4 py-2 font-medium text-[#1E293B] whitespace-nowrap">
              <i class="fas fa-user-circle text-[#FF8800] mr-1"></i>
              {{ item.client.username }}
            </td>
            <td class="px-4 py-2 text-[#276EF1] whitespace-nowrap">{{ item.service.title }}</td>
            <td class="px-4 py-2 text-gray-700 whitespace-nowrap">{{ item.date_requested.strftime('%d-%m-%Y') }}</td>
            <td class="px-4 py-2">
              {% if item.evaluation %}
                <span class="inline-flex items-center gap-1 text-green-600 font-bold">
                  <i class="fas fa-star text-yellow-400"></i>
                  {{ item.evaluation.rating }} / 5
                </span><br>
                <span class="text-gray-600 italic text-sm">{{ item.evaluation.comment }}</span>
              {% else %}
                <span class="inline-block px-2 py-1 bg-gray-200 text-gray-500 rounded-full text-xs font-semibold">Sin evaluación</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="text-center text-gray-400 mt-10">
      <i class="fas fa-info-circle text-2xl mb-2"></i>
      <p class="text-lg">Aún no has completado servicios.</p>
    </div>
  {% endif %}
</div>
{% endblock %}
