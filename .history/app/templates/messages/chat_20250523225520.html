{% extends 'base.html' %}
{% block title %}Chat{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto py-8">
  <h2 class="text-2xl font-bold mb-6 text-[#276EF1]">Chat con {{ other_user.username }}</h2>
  <div class="bg-white rounded-lg p-5 shadow mb-6 min-h-[300px]">
    {% for msg in messages %}
      <div class="mb-2 {% if msg.sender_id == current_user.id %}text-right{% endif %}">
        <div class="inline-block px-4 py-2 rounded-full 
            {% if msg.sender_id == current_user.id %}bg-[#276EF1] text-white{% else %}bg-gray-200 text-gray-700{% endif %}">
          <strong>{% if msg.sender_id == current_user.id %}TÃº{% else %}{{ other_user.username }}{% endif %}:</strong>
          {{ msg.body }}
        </div>
        <div class="text-xs text-gray-400 mt-1">{{ msg.timestamp.strftime('%d-%m-%Y %H:%M') }}</div>
      </div>
    {% endfor %}
  </div>
  <form method="POST" class="flex gap-2">
    {{ form.hidden_tag() }}
    {{ form.body(class_="flex-1 px-4 py-2 rounded border border-gray-300 focus:ring-2 focus:ring-[#276EF1]") }}
    <button type="submit" class="px-5 py-2 bg-[#FF8800] hover:bg-[#CC7700] text-white rounded font-semibold">Enviar</button>
  </form>
</div>
{% endblock %}
