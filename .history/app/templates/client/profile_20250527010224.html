{% extends 'base.html' %}
{% block title %}Editar Perfil – IndepWork{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-[#f5f8ff] via-[#e0e7ef] to-[#e6eefa] py-8">
  <div class="bg-white rounded-2xl shadow-xl p-10 max-w-2xl w-full animate-fade-in">

    <h2 class="text-3xl font-extrabold mb-8 text-[#164399] text-center tracking-tight">Editar mi perfil</h2>
    
    <!-- Banner: Invita a ser Profesional -->
    {% if current_user.role == 'client' %}
      <div class="mb-8">
        <div class="bg-gradient-to-r from-[#276EF1]/90 to-[#FF8800]/80 rounded-xl shadow p-6 flex flex-col md:flex-row items-center gap-5 border border-[#276EF1]/10 animate-fade-in">
          <div class="flex-1">
            <h3 class="text-xl md:text-2xl font-bold text-white mb-1 flex items-center gap-2">
              <i class="fas fa-bullhorn text-yellow-300"></i>
              ¿Quieres publicar tus servicios?
            </h3>
            <p class="text-white/90 mb-2 font-semibold">Convierte tu cuenta en <span class="font-bold text-[#FFEDB0]">profesional</span> y accede a nuevos clientes, mayor visibilidad y pagos seguros.</p>
            <ul class="text-white/95 text-sm pl-3 mb-3 list-disc">
              <li>Publica servicios ilimitados y recibe solicitudes</li>
              <li>Chatea directo con clientes</li>
              <li>Recibe evaluaciones en línea</li>
              <li>Obtén badge profesional verificado</li>
            </ul>
            <p class="text-white/90 text-base mb-2">Actualiza por solo <span class="font-bold text-[#FFEDB0]">$2.990 CLP</span> (pago mensual)</p>
            <form method="POST" action="{{ url_for('auth.upgrade_account') }}">
 
              <button type="submit"
    class="inline-flex items-center px-5 py-2 bg-white text-[#276EF1] hover:bg-[#FF8800] hover:text-white font-bold rounded-lg shadow transition mt-1">
    <i class="fas fa-rocket mr-2"></i> Cambiar a profesional
  </button>
</form>

          </div>
          <div class="hidden md:block flex-shrink-0">
            <img src="{{ url_for('static', filename='images/logo2.png') }}"
              alt="Hazte profesional" class="w-36 h-36 object-contain drop-shadow-2xl">
          </div>
        </div>
      </div>
    {% else %}
      <div class="mb-8">
        <div class="bg-green-50 border border-green-200 rounded-xl p-4 text-center font-semibold text-green-700">
          <i class="fas fa-user-tie mr-2"></i>
          Eres usuario profesional en IndepWork.
        </div>
      </div>
    {% endif %}

    <!-- Mensajes flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-6">
          {% for category, msg in messages %}
            <div class="rounded-lg p-3 mb-2 text-center 
                {% if category == 'success' %}bg-green-100 text-green-700{% elif category == 'warning' %}bg-yellow-100 text-yellow-700{% elif category == 'danger' %}bg-red-100 text-red-700{% else %}bg-blue-100 text-blue-700{% endif %} animate-fade-in">
              {{ msg }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST" class="space-y-7" autocomplete="off">
      {{ form.hidden_tag() }}

      <!-- Nombre -->
      <div>
        {{ form.name.label(class_="block text-[#164399] font-bold mb-1") }}
        {{ form.name(class_="w-full px-4 py-3 bg-gray-100 text-black border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#276EF1]" ~ (' border-red-400' if form.name.errors else ''), placeholder='Ej: Juan Pérez') }}
        {% if form.name.errors %}
          <div class="text-red-500 text-sm mt-1">{{ form.name.errors[0] }}</div>
        {% endif %}
      </div>

      <!-- Email -->
      <div>
        {{ form.email.label(class_="block text-[#164399] font-bold mb-1") }}
        {{ form.email(class_="w-full px-4 py-3 bg-gray-100 text-black border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#276EF1]" ~ (' border-red-400' if form.email.errors else ''), placeholder='correo@ejemplo.com', autocomplete='email') }}
        {% if form.email.errors %}
          <div class="text-red-500 text-sm mt-1">{{ form.email.errors[0] }}</div>
        {% endif %}
      </div>

      <!-- Password -->
      <div>
        {{ form.password.label(class_="block text-[#164399] font-bold mb-1") }}
        {{ form.password(class_="w-full px-4 py-3 bg-gray-100 text-black border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#276EF1]" ~ (' border-red-400' if form.password.errors else ''), placeholder='Contraseña', autocomplete='new-password') }}
        <small class="text-gray-500">Déjalo en blanco para no cambiar la contraseña</small>
        {% if form.password.errors %}
          <div class="text-red-500 text-sm mt-1">{{ form.password.errors[0] }}</div>
        {% endif %}
      </div>

      <!-- Botón submit -->
      <button type="submit" class="w-full py-3 bg-gradient-to-r from-[#276EF1] to-[#FF8800] hover:from-[#1E5BB8] hover:to-[#CC7700] text-white rounded-lg font-bold text-lg shadow transition">
        <i class="fas fa-save mr-2"></i> Guardar cambios
      </button>
    </form>
  </div>
</div>

<!-- Animación Fade-in -->
<style>
  @keyframes fade-in {0%{opacity:0;transform:translateY(30px);}100%{opacity:1;transform:none;}}
  .animate-fade-in {animation: fade-in 1.1s cubic-bezier(.6,0,.4,1) forwards;}
</style>
{% endblock %}
