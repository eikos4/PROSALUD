{% extends 'base.html' %}
{% block title %}Dashboard Cliente ‚Äì IndepWork{% endblock %}

{% block content %}
<section class="min-h-screen bg-gray-100 py-12">
  <div class="max-w-6xl mx-auto px-4">

    <!-- Barra de B√∫squeda y Filtros -->
    <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center mb-8 gap-4">
      <form method="GET" class="flex-1 flex gap-2">
        <input
          type="text"
          name="q"
          placeholder="Busca un profesional..."
          value="{{ search_term }}"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#276EF1]"
        />
        <button type="submit" class="px-4 py-2 bg-[#276EF1] hover:bg-[#1E5BB8] text-white rounded-lg">
          üîç
        </button>
      </form>
      <select
        name="region"
        onchange="this.form.submit()"
        class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#276EF1]"
      >
        <option value="">Todas las Regiones</option>
        {% for r in regions %}
          <option value="{{ r }}" {% if r == selected_region %}selected{% endif %}>{{ r }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Resultados: profesionales -->
    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
      {% for prof in professionals %}
      <div class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
        <div class="h-40 bg-gray-200 rounded mb-4 overflow-hidden">
          <img
            src="{{ prof.profile_image_url or url_for('static', filename='images/placeholder.png') }}"
            alt="{{ prof.username }}"
            class="w-full h-full object-cover"
          />
        </div>
        <h3 class="text-xl font-semibold text-[#333333] mb-1">{{ prof.username }}</h3>
        {% if prof.location %}
        <p class="text-gray-500 text-sm mb-2 flex items-center gap-1">
          <i class="fas fa-map-marker-alt"></i> {{ prof.location }}
        </p>
        {% endif %}
        <span class="inline-block px-3 py-1 bg-[#276EF1]/20 text-[#276EF1] rounded-full text-sm mb-3">
          {{ prof.category|capitalize }}
        </span>
        <p class="text-gray-600 text-sm mb-4">
          {{ prof.description[:80] if prof.description else 'Sin descripci√≥n' }}...
        </p>
        <div class="flex gap-2">
          <a href="{{ url_for('main.public_profile', id=prof.id) }}"
             class="flex-1 px-4 py-2 bg-[#276EF1] hover:bg-[#1E5BB8] text-white rounded-md text-center text-sm">
            Ver Perfil
          </a>
          <a href="{{ url_for('messages.chat', other_id=prof.id) }}"
             class="flex-1 px-4 py-2 bg-[#FF8800] hover:bg-[#CC7700] text-white rounded-md text-center text-sm">
            Mensaje
          </a>
        </div>
      </div>
      {% else %}
        <p class="text-center text-gray-500 col-span-full">
          No se encontraron profesionales.
        </p>
      {% endfor %}
    </div>

  </div>
</section>
{% endblock %}
