{% extends 'base.html' %}
{% block title %}Solicitar servicio – IndepWork{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto py-12 px-4">

  <h2 class="text-3xl font-extrabold text-[#276EF1] mb-8 flex items-center gap-2">
    <i class="fas fa-handshake"></i> Solicitar servicio
  </h2>

  <div class="bg-white rounded-2xl shadow-xl p-8 mb-8 border border-[#276EF1]/20 flex flex-col gap-5">

    <!-- Bloque profesional -->
    <div class="flex items-center gap-4 mb-3">
      <img src="{{ professional.profile_image_url or url_for('static', filename='images/placeholder.png') }}"
           alt="{{ professional.full_name or professional.username }}"
           class="h-14 w-14 rounded-full object-cover border-2 border-[#FF8800]/40 shadow">
      <div>
        <div class="font-bold text-lg text-[#164399]">
          {{ professional.full_name or professional.username }}
        </div>
        {% if professional.category %}
        <span class="inline-block px-3 py-1 bg-[#FF8800]/10 text-[#FF8800] rounded-full text-xs font-semibold mt-1">
          <i class="fas fa-briefcase"></i> {{ professional.category|capitalize }}
        </span>
        {% endif %}
      </div>
    </div>

    <!-- Servicio -->
    <div>
      <div class="font-semibold text-[#276EF1] text-lg mb-1">
        <i class="fas fa-briefcase"></i> {{ service.title }}
      </div>
      <div class="text-gray-600 mb-2 text-sm">{{ service.description }}</div>
      <div class="text-[#FF8800] text-xl font-extrabold">
        <i class="fas fa-dollar-sign"></i> ${{ "{:,.0f}".format(service.price) }} CLP
      </div>
    </div>
  </div>

  <form method="POST" class="bg-white rounded-2xl shadow-lg p-8 border border-[#276EF1]/10">
    {{ form.hidden_tag() }}
    <div class="mb-6">
      {{ form.message.label(class_="block text-[#164399] font-semibold mb-2") }}
      {{ form.message(
        class_="form-control w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#276EF1] text-gray-900 resize-none",
        rows="5",
        placeholder="Incluye detalles, dudas, fecha preferida u otra info relevante para tu solicitud..."
      ) }}
      {% if form.message.errors %}
        <div class="text-red-600 text-sm mt-1">{{ form.message.errors[0] }}</div>
      {% endif %}
    </div>
    <button type="submit"
            class="w-full py-4 bg-[#276EF1] hover:bg-[#164399] text-white rounded-xl font-bold text-lg shadow-lg flex items-center justify-center gap-2 transition">
      <i class="fas fa-paper-plane"></i> Enviar solicitud
    </button>
  </form>

  <div class="mt-6 text-center text-gray-500 text-sm">
    <i class="fas fa-lock mr-2"></i>Tu solicitud es privada y solo el profesional podrá verla.
  </div>
</div>
{% endblock %}
