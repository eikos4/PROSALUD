{% extends 'base.html' %}
{% block title %}Evaluaciones recibidas{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto py-12 animate-fade-in">
  <h2 class="text-3xl font-black text-[#276EF1] mb-8 flex items-center gap-3">
    <i class="fas fa-star-half-alt text-[#FF8800]"></i> Evaluaciones de clientes
  </h2>
  {% if evaluaciones %}
    <div class="space-y-7">
      {% for ev in evaluaciones %}
      <div class="bg-white rounded-2xl shadow-xl p-7 flex gap-5 border border-[#276EF1]/10 hover:shadow-2xl transition group">
        <!-- Avatar y nombre -->
        <div class="flex-shrink-0 flex flex-col items-center justify-center">
          <img src="{{ ev.client.profile_image_url or url_for('static', filename='images/placeholder.png') }}"
               alt="{{ ev.client.username }}"
               class="w-14 h-14 rounded-full object-cover border-2 border-[#FF8800]/40 shadow mb-2 group-hover:scale-105 transition">
          <span class="text-xs text-[#276EF1] font-extrabold">{{ ev.client.username }}</span>
        </div>
        <!-- Contenido evaluación -->
        <div class="flex-1">
          <!-- Estrellas y fecha -->
          <div class="flex items-center gap-3 mb-2">
            <div class="flex gap-1">
              {% for i in range(1, 6) %}
                {% if i <= ev.rating %}
                  <i class="fas fa-star text-yellow-400 animate-star"></i>
                {% else %}
                  <i class="far fa-star text-gray-300"></i>
                {% endif %}
              {% endfor %}
            </div>
            <span class="text-xs text-gray-500 font-semibold ml-2"><i class="fas fa-calendar-alt"></i> {{ ev.created_at.strftime('%d-%m-%Y') }}</span>
          </div>
          <div class="text-[#164399] text-base font-semibold mb-1">
            {{ ev.comment or 'Sin comentario' }}
          </div>
          <span class="text-sm text-gray-500 italic">Servicio calificado por {{ ev.client.full_name or ev.client.username }}</span>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center text-gray-400 mt-12">
      <i class="fas fa-info-circle text-4xl mb-3 text-[#FF8800]"></i>
      <p class="text-lg font-bold">Todavía no tienes evaluaciones.</p>
      <p class="text-base text-[#276EF1]">Cuando un cliente califique tu servicio, aparecerá aquí.</p>
    </div>
  {% endif %}
</div>
<style>
  @keyframes star-pop {0%{transform:scale(.8);}50%{transform:scale(1.3);}100%{transform:scale(1);}}
  .animate-star { animation: star-pop 0.5s cubic-bezier(.7,.2,.3,1) }
  @keyframes fade-in {0%{opacity:0;transform:translateY(40px);}100%{opacity:1;transform:none;}}
  .animate-fade-in {animation: fade-in 1.1s cubic-bezier(.6,0,.4,1) forwards;}
</style>
{% endblock %}
